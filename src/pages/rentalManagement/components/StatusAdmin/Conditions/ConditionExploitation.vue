<template>
    <CardWrapperTitle
        type-title="h3"
        label="Conditions d’exploitations"
        class="statusAdmin__container-content"
    >
        <div class="statusAdmin__items place-content-14px">
            <RadioGroup
                label="J’exploite :"
                name="statusAdminTourist"
                :items="data"
                @change="handleChange"
            />
            <Select
                v-if="dataSelectedValue.selectResidence"
                label="Type d'hébergement"
                name="selectCondition"
                :options="dataSelectedValue.selectResidence"
                placeholder="Sélectionnez"
                @change-select="selectChange"
                class="statusAdmin__condition-select"
            />
            <div>
                <Button :disabled="dataSelected.condition ? false : true" @click="handleShowModal"> Voir les conditions </Button>
            </div>
            <Modal
                width="800"
                :title="dataSelected.label"
                :is-show-modal="showModal"
                @on-back="showModal = false"
            >
                <template #content>
                    <div class="statusAdmin__condition place-content-14px">
                        <div
                            v-for="(item, index) in dataSelected.condition"
                            class="statusAdmin__condition-items"
                            :key="index"
                        >
                            <Title
                                type="h4"
                                :label="index + 1 + '. ' + item.title"
                                class="statusAdmin__condition-title"
                            />
                            <div
                                v-for="(subItem, index) in item.content"
                                class="statusAdmin__condition-content"
                                :key="index"
                            >
                                <Paragraphe v-html="subItem.label" />
                                <ul
                                    v-if="subItem.lists"
                                    class="statusAdmin__condition-lists list-[disc]"
                                >
                                    <li
                                        v-for="(
                                            listItem, index
                                        ) in subItem.lists"
                                        :key="index"
                                    >
                                        <template v-if="listItem.label">
                                            <span>
                                                {{ listItem.label }}
                                            </span>
                                            <ul
                                                class="statusAdmin__condition-lists list-[square]"
                                            >
                                                <li
                                                    v-for="(
                                                        sub, index
                                                    ) in listItem.sublists"
                                                    :key="index"
                                                >
                                                    <template v-if="sub.label">
                                                        <span>
                                                            {{ sub.label }}
                                                        </span>
                                                        <ul
                                                            v-if="
                                                                sub.sublistsItems
                                                            "
                                                            class="statusAdmin__condition-lists list-[circle]"
                                                        >
                                                            <li
                                                                v-for="(
                                                                    subLast,
                                                                    index
                                                                ) in sub.sublistsItems"
                                                                :key="subLast"
                                                            >
                                                                <span>
                                                                    {{
                                                                        subLast
                                                                    }}
                                                                </span>
                                                            </li>
                                                        </ul>
                                                    </template>
                                                    <template v-else>
                                                        <span>
                                                            {{ sub }}
                                                        </span>
                                                    </template>
                                                </li>
                                            </ul>
                                        </template>
                                        <template v-else>
                                            <span> {{ listItem }} </span>
                                        </template>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </template>
            </Modal>
        </div>
    </CardWrapperTitle>
</template>

<script setup lang="ts">
    import Button from '@/components/Common/Button/Button.vue';
    import Paragraphe from '@/components/Common/Paragraphe/Paragraphe.vue';
    import RadioGroup from '@/components/Common/RadioGroup/RadioGroup.vue';
    import Select from '@/components/Common/Select/Select.vue';
    import Title from '@/components/Common/Title/Title.vue';
    import CardWrapperTitle from '@/components/Display/CardWrapperTitle/CardWrapperTitle.vue';
    import Modal from '@/components/Display/Modal/Modal.vue';
    import { ref } from 'vue';
    import { dataBruxelles, dataFlandre, dataWallonie } from './ConditionExploitation';

    const data = ref<Array<any>>(dataBruxelles);
    const dataSelected = ref<any>([]);
    const dataSelectedValue = ref<any>([]);
    const showModal = ref<boolean>(false);

    function handleChange(value: any) {
        dataSelectedValue.value = value.selectedValue;
        if (value.selectedValue.condition) {
            dataSelected.value = value.selectedValue;
        } else {
            dataSelected.value = [];
        }
    }

    function selectChange(value: any, option: any) {
        dataSelected.value = option;
    }

    function handleShowModal() {
        showModal.value = !showModal.value;
    }
</script>

<style lang="scss" scoped>
    .statusAdmin {
        &__condition {
            &-items {
                @apply place-content-10px;
            }
            &-title {
                @apply text-[14px] font-[500] text-primary;
            }
            &-content {
                @apply text-justify;
                &:deep() {
                    strong {
                        @apply font-[500];
                    }
                }
            }
            &-lists {
                @apply pl-[20px];
            }
        }
    }
</style>
